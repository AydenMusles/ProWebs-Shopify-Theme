<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script><script type="text/javascript">!function(n){var e={};function a(r){if(e[r])return e[r].exports;var t=e[r]={i:r,l:!1,exports:{}};return n[r].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=n,a.c=e,a.d=function(r,t,n){a.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:n})},a.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},a.t=function(t,r){if(1&r&&(t=a(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var e in t)a.d(n,e,function(r){return t[r]}.bind(null,e));return n},a.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return a.d(t,"a",t),t},a.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},a.p="",a(a.s="./src/index.js")}({"./src/includes/init.js":function(module,exports){eval("var mandatoryCollections = [];\r\nfor (var c in storePickupSettings.mandatory_collections) {\r\n    mandatoryCollections.push(storePickupSettings.mandatory_collections[c].title.replace(/'/g, '&apos;'));\r\n}\r\nvar productCollections = document.querySelectorAll('.storepickup-product-collection'), i;\r\nvar pickupContainer = document.getElementById(\"pickup-container\");\r\nvar storeForm = pickupContainer.closest(\"form\");\r\nstoreForm.action += '?locale={{ shop.locale }}';\r\nif (pickupProductInCart === true) {\r\n    storeForm.querySelector('[name=\"checkout\"]').style = 'display: none;'\r\n}\r\nfor (i = 0; i < productCollections.length; ++i) {\r\n    var value = productCollections[i].innerHTML.replace(/'/g, '&apos;');\r\n    if (mandatoryCollections.indexOf(value) > -1) {\r\n        document.querySelector('.pickup-button').style = 'display: none;'\r\n        var newItem = document.createElement(\"span\");\r\n        newItem.style = 'font-weight: bold;';\r\n        var textnode = document.createTextNode(\"An item in your cart must be collected\");\r\n        newItem.appendChild(textnode);\r\n\r\n        pickupContainer.insertBefore(newItem, pickupContainer.childNodes[0]);\r\n        storeForm.querySelector('[name=\"checkout\"]').style = 'display: none;'\r\n        break;\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack:///./src/includes/init.js?")},"./src/includes/storepickup.js":function(module,exports){eval("var css = `\r\n#pickup-store-search {\r\n        background-position: 10px 12px;\r\n        /* Position the search icon */\r\n        background-repeat: no-repeat;\r\n        /* Do not repeat the icon image */\r\n        font-size: 16px;\r\n        /* Increase font-size */\r\n        padding: 12px 20px 12px 12px;\r\n        /* Add some padding */\r\n        border: 1px solid #ddd;\r\n        /* Add a grey border */\r\n        margin-bottom: 12px;\r\n        /* Add some space below the input */\r\n    }\r\n\r\n    #storeUL {\r\n        list-style-type: none;\r\n        padding: 0;\r\n        margin: 0;\r\n        overflow: auto;\r\n    }\r\n\r\n    #storeUL li {\r\n        margin-bottom: 5px;\r\n    }\r\n\r\n    #storeUL li a {\r\n        padding: 12px;\r\n        /* Add some padding */\r\n        text-decoration: none;\r\n        /* Remove default text underline */\r\n        display: block;\r\n        /* Make it into a block element to fill the whole list */\r\n    }\r\n\r\n    #storeUL li a.header {\r\n        background-color: #e2e2e2;\r\n        /*Darker background for headers */\r\n        cursor: default;\r\n        /* Change cursor style */\r\n    }\r\n\r\n    #storeUL li a:hover:not(.header) {\r\n        background-color: #eee;\r\n        /* Add a hover effect to all links, except for headers */\r\n    }\r\n\r\n    .activeStore {\r\n        background: #cccccc;\r\n        /* Background for currently selected store */\r\n    }\r\n\r\n    #pickup-header {\r\n        font-size: 0.95em;\r\n        text-decoration: none;\r\n        display: inline;\r\n        position: relative;\r\n        top: -15px;\r\n    }\r\n\r\n    #pickup-box {\r\n        vertical-align: middle;\r\n    }\r\n\r\n    .pickup-hidden {\r\n        display: none!important;\r\n    }\r\n\r\n    #pickup-details{\r\n        min-width: 260px;\r\n    }\r\n\r\n    #pickup-details input{\r\n        width:100%;\r\n    }\r\n\r\n    .hide{\r\n        display: none!important;\r\n    }\r\n    #pickup-container{\r\n        display: flex;\r\n        -ms-flex-direction: column;\r\n        flex-direction: column;\r\n        margin-bottom: 1rem;\r\n        margin-top: 1rem;\r\n        text-align: left;\r\n        align-items: flex-end;\r\n        width: 100%;\r\n    }\r\n    .pickup-button{\r\n        border: 1px solid #efefef;\r\n        border-radius: 2px;\r\n        padding: 10px;\r\n        margin-bottom: 20px;\r\n        display: inline-block;\r\n        text-align: center;\r\n        margin-top: 20px;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .selected{\r\n        background: #f7f7f7;\r\n        border: 1px solid #e6e6e6;\r\n    }\r\n    \r\n    .away{\r\n        position: fixed;\r\n        top: -1000px;\r\n    }\r\n`;\r\n// if pressing add to cart multiple times (without refreshing the page), pickup buttons dissapears\r\nvar storePickup = {\r\n    $: {},\r\n    pickupStore: '',\r\n    shippingInformation: '',\r\n    pickupButtonText: '',\r\n    init: function($){\r\n        this.$ = $;\r\n\r\n        console.log('initializing...');\r\n        if ($ === undefined || $.fn.pickadate === undefined) $ = jQuery;\r\n        if (typeof storePickupLoaded !== \"undefined\"){\r\n            storePickupLoaded = true;\r\n        }\r\n\r\n        //console.log(stores)\r\n        var that = this;\r\n        var settings = this.settings();\r\n\r\n        //if (window.location.pathname == '/cart') return;\r\n\r\n        if (settings.date_enabled || settings.phone || settings.name || stores.length > 1) {\r\n            this.injectButton(that.setPickupButtonValues.bind(that));\r\n        }\r\n    },\r\n\r\n    setPickupButtonValues: function(){\r\n        var settings = storePickupSettings;\r\n        var that = this;\r\n        var body = that.$('body');\r\n        var pickupProductID = pickupProduct;\r\n        var mandatoryCollections = [];\r\n        var phone = that.$('#pickup-number');\r\n        var name = that.$('#pickup-name');\r\n\r\n        that.setDatePicker();\r\n        that.displayStores();\r\n        that.listenEvents();\r\n        that.initShippingInformation();\r\n\r\n        // Pickup button text\r\n        var cr_button_text = settings.button_text === undefined? 'Pick Up In Store' : settings.button_text;\r\n        if (cr_button_text.trim() === '') cr_button_text = 'Pick Up In Store';\r\n        that.pickupButtonText = cr_button_text;\r\n        //that.$('.pickup-button > span').text(that.pickupButtonText);\r\n        that.changePickupButtonText();\r\n\r\n        // Display checkout button\r\n        var form = that.submitForm();\r\n        that.$(form).find('[name=\"checkout\"]').css('display', 'inline-block')\r\n\r\n        // Extra message\r\n        if (settings.message !== undefined && settings.message != '') {\r\n            that.$('.js-storepickup-message').html(settings.message);\r\n        }\r\n\r\n        // If disabled, hide it\r\n        if (settings.disabled === true) {\r\n            that.$('#pickup-container').addClass('hide');\r\n        }\r\n\r\n        // Check for a mandatory product\r\n        if (that.checkForMandatoryProduct() === true){\r\n            that.activatePickupButton();\r\n        } else {\r\n            // check if already in the cart\r\n            that.getCartItems().then((response) => {\r\n                let found = false;\r\n                for (var item in response.items) {\r\n                    if (response.items[item].variant_id === parseInt(pickupProduct)) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (found === true) {\r\n                    that.activatePickupButton()\r\n                }\r\n            })\r\n        }\r\n\r\n        //\r\n        body.on('click tap', '.js-toggle-pickup', function(e){\r\n            e.preventDefault()\r\n            console.log('click')\r\n            that.$(this).toggleClass('selected');\r\n            that.pickupBoxChange.apply(that);\r\n        });\r\n    },\r\n\r\n    changePickupButtonText: function(){\r\n        let that = this;\r\n        that.$('.pickup-button > span').text(that.pickupButtonText);\r\n    },\r\n\r\n    /**\r\n     * Check the contents of the cart and if the pickup product is listed activates the button\r\n     * @param cart\r\n     */\r\n    activatePickupButtonIfItemInCart: function(cart){\r\n        let that = this;\r\n        let found = false;\r\n        for (var item in cart.items) {\r\n            if (cart.items[item].variant_id === parseInt(pickupProduct)) {\r\n                found = true;\r\n                break;\r\n            }\r\n        }\r\n        if (found === true) {\r\n            that.activatePickupButton()\r\n        }\r\n    },\r\n\r\n    // Initialize shipping information that will help fill up the checkout form\r\n    initShippingInformation: function(){\r\n        var shippingInfo = \"step=contact_information&checkout[shipping_address][company]=\" + pickupCompany\r\n            + \"&checkout[shipping_address][phone]=\"\r\n            + \"&checkout[shipping_address][address1]=\" + pickupAddress.replace(/\\#/, '') +\r\n            \"&checkout[shipping_address][city]=\" + pickupCity\r\n            + \"&checkout[shipping_address][country]=\" + pickupCountry\r\n            + \"&checkout[shipping_address][zip]=\" + pickupZip\r\n            + \"&checkout[shipping_address][province]=\" + pickupProvince\r\n        ;\r\n        this.shippingInformation = shippingInfo;\r\n    },\r\n\r\n    activatePickupButton: function(){\r\n        this.$('.js-toggle-pickup').addClass('selected');\r\n        this.pickupBoxChange.apply(this);\r\n    },\r\n\r\n    checkForMandatoryProduct: function(){\r\n        var that = this;\r\n        let mandatoryCollections = [];\r\n        for (var c in storePickupSettings.mandatory_collections) {\r\n            mandatoryCollections.push(storePickupSettings.mandatory_collections[c].title.replace(/'/g, '&apos;'));\r\n        }\r\n        var gotMandatoryProduct = false;\r\n        this.$('.storepickup-product-collection').each(function(c) {\r\n            //console.log($jq(this).text())\r\n            if (mandatoryCollections.indexOf(that.$(this).text().replace(/'/g, '&apos;')) > -1) {\r\n                gotMandatoryProduct = true;\r\n            }\r\n        });\r\n\r\n        return gotMandatoryProduct;\r\n    },\r\n\r\n    setDatePicker: function(){\r\n        var that = this;\r\n        var settings = storePickupSettings;\r\n        var yesterday = new Date((new Date()).valueOf() - 1000 * 60 * 60 * 36);\r\n        var maxDays = settings.max_days && settings.max_days != 0? new Date((new Date()).valueOf() + 1000 * 60 * 60 * settings.max_days * 24) : '';\r\n        var minDays = settings.min_days && settings.min_days != 0? new Date((new Date()).valueOf() + 1000 * 60 * 60 * settings.min_days * 24) : new Date();\r\n        var todayPickup = settings.same_day_pickup? yesterday : new Date(); // blackout today if same day pickup is not set\r\n        var $input = that.$('.datepicker').pickadate({\r\n            today: '',\r\n            clear: '',\r\n            close: '',\r\n            min: minDays,\r\n            max:  maxDays\r\n            ,disable: [\r\n                todayPickup\r\n            ]\r\n        })\r\n        var picker = $input.pickadate('picker');\r\n\r\n        // Blackout dates\r\n        if (picker !== undefined && settings.blackoutDates) {\r\n            let blackoutdates = settings.blackoutDates.split('-')\r\n\r\n            let blackoutdatesCollection = [];\r\n            for (let i in blackoutdates) {\r\n                let chunks = (blackoutdates[i] + '').split(',');\r\n                blackoutdatesCollection.push(chunks);\r\n            }\r\n            picker.set('disable', blackoutdatesCollection);\r\n        }\r\n\r\n        if (picker !== undefined) {\r\n            picker.on({\r\n                set: function(thingSet) {\r\n                    //console.log('Set stuff:', thingSet)\r\n                    that.updateStorePickupInformation()\r\n                }\r\n            })\r\n        }\r\n    },\r\n    displayStores: function(){\r\n        var that = this;\r\n        if (stores === undefined) return;\r\n        if (stores === '') return;\r\n\r\n        //if (typeof stores === \"object\") return;\r\n        if (stores !== Object(stores)) {\r\n            stores = JSON.parse(stores);\r\n        }\r\n\r\n        // if not at least 2 stores don't display this field\r\n        if (stores.length < 2) return;\r\n        // Set position where stores will be displayed\r\n        console.log('stores')\r\n        var storesTemplate = this.storesTemplate();\r\n\r\n        if (this.settings.stores_on_top) {\r\n            that.$('.js-stores-position-1').html(storesTemplate);\r\n        } else {\r\n            that.$('.js-stores-position-2').html(storesTemplate);\r\n        }\r\n\r\n        var ul = document.getElementById(\"storeUL\");\r\n        that.$('.pickup-store-search').prop('required', true);\r\n\r\n        for (var n in stores) {\r\n            that.$(ul).append('<li id= ' + stores[n].storeID + ' class=\"searchTerm\">' +\r\n                '<a href=\"#\" ' +\r\n                'data-zip-code=\"' + stores[n].zip + '\" '\r\n                + 'data-address=\"' + stores[n].street + '\"'\r\n                + 'data-name=\"' + stores[n].name + '\"'\r\n                + 'data-city=\"' + stores[n].city + '\"'\r\n                + 'data-country=\"' + stores[n].country + '\"'\r\n                + 'data-province=\"' + stores[n].province + '\"'\r\n                + '\">'\r\n                + stores[n].name + ' - ' + stores[n].city\r\n                + '</a></li>');\r\n        }\r\n        this.storeSearchEvent()\r\n    },\r\n\r\n    storeSearchEvent: function(){\r\n        let that = this;\r\n        var phone = that.$('#pickup-number');\r\n        that.$(\"#storeUL\").on(\"click\", \".searchTerm\", function(e) {\r\n            // Make class active\r\n            // If already selected, unselect\r\n            if (that.$(this).attr('class').indexOf('activeStore') > -1) {\r\n                that.$(this).removeClass('activeStore');\r\n                this.pickupStore = \"\";\r\n                that.$('#pickup-store').val('');\r\n                that.$('#pickup-store-search').val('')\r\n                that.$('.js-chosen-store').remove();\r\n            } else {\r\n                var pickupStoreHtml = that.$(this).children('a')[0].innerHTML;\r\n                var zipCode = that.$(this).children(\"a\")[0].getAttribute('data-zip-code');\r\n                var address = that.$(this).children(\"a\")[0].getAttribute('data-address');\r\n                var chosenCity = that.$(this).children(\"a\")[0].getAttribute('data-city');\r\n                var chosenProvince = that.$(this).children(\"a\")[0].getAttribute('data-province');\r\n                var chosenCountry = that.$(this).children(\"a\")[0].getAttribute('data-country');\r\n                var storeName = that.$(this).children(\"a\")[0].getAttribute('data-name');\r\n                that.$(\"#storeUL li\").removeClass('activeStore'); // Clear class from all li\r\n                that.$('.js-chosen-store').remove();\r\n                that.$(this).addClass('activeStore');\r\n                that.$('#pickup-store').val(pickupStoreHtml);\r\n                that.$('#pickup-store-search').val(pickupStoreHtml)\r\n                that.$('#pickup-store-search').after(\r\n                    '<span class=\"js-chosen-store\">' + storeName + '<br> ' +\r\n                    'Address: ' + address + '<br>' +\r\n                    'Zip: ' + zipCode\r\n                    + '</span>'\r\n                )\r\n\r\n                that.updateStorePickupInformation()\r\n\r\n                //Update autofilling data for the checkout page\r\n                var shippingInfo = \"step=contact_information&checkout[shipping_address][company]=\" + storeName.replace(/\\#/, '')\r\n                    + \"&checkout[shipping_address][phone]=\" + phone.val()\r\n                    + \"&checkout[shipping_address][address1]=\" + address.replace(/\\#/, '')\r\n                    + \"&checkout[shipping_address][city]=\" + chosenCity\r\n                    + \"&checkout[shipping_address][country]=\" + chosenCountry\r\n                    + \"&checkout[shipping_address][zip]=\" + zipCode\r\n                    + \"&checkout[shipping_address][province]=\" + chosenProvince\r\n                    + \"&checkout[shipping_address][county]=\" + chosenProvince\r\n                ;\r\n                that.shippingInformation = shippingInfo;\r\n                that.updateFormActionWithShippingInformation();\r\n            };\r\n\r\n            e.preventDefault();\r\n        });\r\n    },\r\n\r\n    // Set the url where the form will point (helps auto complete the checkout page form)\r\n    updateFormActionWithShippingInformation: function(){\r\n        var form = this.submitForm();\r\n        var localeChunks = pickupLocale.split('-');\r\n        this.$(form).attr('action', '/checkout?' + this.shippingInformation + '&locale=' + localeChunks[0] + '-pickup');\r\n    },\r\n\r\n    listenEvents: function(){\r\n        let that = this;\r\n        //var theme = theme || '';\r\n        if (typeof theme !== \"undefined\" && typeof theme.cache !== \"undefined\" && typeof theme.cache.$body !== \"undefined\") {\r\n            theme.cache.$body.on('ajaxCart.afterCartLoad', function(evt, cart) {\r\n                console.log('cart loaded')\r\n                if (!that.$('.pickup-button').hasClass('selected')) {\r\n                    //that.activatePickupButton();\r\n                    that.changePickupButtonText();\r\n                    that.activatePickupButtonIfItemInCart(cart);\r\n                    that.setDatePicker();\r\n                    that.displayStores();\r\n                }\r\n            })\r\n\r\n        }\r\n\r\n        // Cart drawer\r\n        that.$('body').on('change', '#pickup-name', function(e){\r\n            //storePickupInformation += ' Name of person collecting: ' + $jq(this).val()\r\n            that.updateStorePickupInformation()\r\n        })\r\n\r\n        that.$('body').on('change', '#pickup-number', function(e){\r\n            //storePickupInformation += ' Number: ' + $jq(this).val()\r\n            that.updateStorePickupInformation()\r\n        })\r\n\r\n        that.$('body').on('change', '#extra_input_1', function(e){\r\n            //storePickupInformation += ' ' + settings.extra_input_1 + $jq(this).val()\r\n            that.updateStorePickupInformation()\r\n        })\r\n\r\n        that.$('body').on('change', '#extra_input_2', function(e){\r\n            //storePickupInformation += ' ' + settings.extra_input_2 + $jq(this).val()\r\n            that.updateStorePickupInformation()\r\n        })\r\n\r\n        that.$('body').on('change', '#extra_input_3', function(e){\r\n            //storePickupInformation += ' ' + settings.extra_input_3 + $jq(this).val()\r\n            that.updateStorePickupInformation()\r\n        })\r\n    },\r\n\r\n    storeFilter: function() {\r\n        // Filters stores by search\r\n        // Declare variables\r\n        var input, filter, ul, li, a, i;\r\n        input = document.getElementById('pickup-store-search');\r\n        filter = input.value.toUpperCase();\r\n        ul = document.getElementById(\"storeUL\");\r\n        li = ul.getElementsByTagName('li');\r\n\r\n        // Loop through all list items, and hide those who don't match the search query\r\n        for (i = 0; i < li.length; i++) {\r\n            a = li[i].getElementsByTagName(\"a\")[0];\r\n            if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {\r\n                li[i].style.display = \"\";\r\n            } else {\r\n                li[i].style.display = \"none\";\r\n            }\r\n        }\r\n    },\r\n\r\n    addCartItems: function(){\r\n        var that = this;\r\n        console.log(pickupProduct)\r\n        this.getCartItems()\r\n            .then((response) => {\r\n                var inCart = false; // Assume not currently in cart\r\n\r\n                // Check each item in cart to see if Pickup product currently in the cart\r\n                for (var item in response.items) {\r\n                    if (response.items[item].variant_id == pickupProduct) {\r\n                        inCart = true;\r\n                    };\r\n                };\r\n\r\n                // Not in cart, add pickup product to cart\r\n                if (inCart === false) {\r\n                    var productData = {\r\n                        quantity: 1,\r\n                        id: pickupProduct\r\n                    };\r\n\r\n                    that.$.ajax({\r\n                        type: \"POST\",\r\n                        url: \"/cart/add.js\",\r\n                        data: productData,\r\n                        success: function() {\r\n                            if(window.location.pathname.indexOf('/cart') < 0){\r\n                                //var ajaxCart = ajaxCart || '';\r\n                                if (typeof ajaxCart !== \"undefined\"){\r\n                                    ajaxCart.load();\r\n                                    if (typeof theme === \"undefined\" || typeof theme.cache === \"undefined\"){\r\n                                        setTimeout(function(){\r\n                                           that.displayPickupAfterRedraw()\r\n                                        }, 500)\r\n                                    }\r\n                                }\r\n                            }\r\n                            console.log('store pickup added')\r\n                        },\r\n                        error: function(err) {\r\n                            console.log(err);\r\n                        },\r\n                        dataType: \"json\"\r\n                    });\r\n                }\r\n            });\r\n    },\r\n\r\n    displayPickupAfterRedraw: function(){\r\n        let that = this;\r\n        if (!that.$('.pickup-button').hasClass('selected')) {\r\n            that.getCartItems().then(cart => {\r\n                //that.activatePickupButton();\r\n                that.changePickupButtonText();\r\n                that.activatePickupButtonIfItemInCart(cart);\r\n                that.setDatePicker();\r\n                that.displayStores();\r\n            });\r\n\r\n        }\r\n    },\r\n\r\n    removePickupProduct: function(){\r\n        var that = this;\r\n        this.getCartItems()\r\n            .then((response) => {\r\n                //Check each item in cart to see if Pickup product currently in the cart\r\n                let found = false;\r\n                for (var item in response.items) {\r\n                    if (response.items[item].variant_id == pickupProduct) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (found === true) {\r\n                    // Changes quantity of item in cart to 0.\r\n                    var productData = {\r\n                        quantity: 0,\r\n                        id: pickupProduct\r\n                    };\r\n                    that.$.post('/cart/change.js', productData, function(res, err) {\r\n                        if (err != \"success\") {\r\n                            console.log(err);\r\n                        } else {\r\n                            if(window.location.pathname.indexOf('/cart') > -1){\r\n                                location.reload();\r\n                            } else {\r\n                                //var ajaxCart = ajaxCart || '';\r\n                                if (typeof ajaxCart !== \"undefined\"){\r\n                                    console.log('redraw');\r\n                                    ajaxCart.load();\r\n                                    if (typeof theme === \"undefined\") {\r\n                                        setTimeout(function(){\r\n                                            that.displayPickupAfterRedraw()\r\n                                        }, 500)\r\n                                    } else if (typeof theme.cache === \"undefined\"){\r\n                                        setTimeout(function(){\r\n                                            that.displayPickupAfterRedraw()\r\n                                        }, 500)\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    }, 'json');\r\n                }\r\n            });\r\n    },\r\n\r\n    getCartItems: function(){\r\n        var that = this;\r\n        return new Promise((resolve, reject) => {\r\n            that.$.ajax({\r\n                url: '/cart.js',\r\n                type: 'GET',\r\n                dataType: 'json',\r\n                success: function(response) {\r\n                    resolve(response)\r\n                },\r\n                error: function(e) {\r\n                    reject(e);\r\n                }\r\n            });\r\n        })\r\n    },\r\n\r\n    displayExtraFields: function(){\r\n        var that = this;\r\n        var settings = this.settings();\r\n\r\n        // Display extra fields\r\n        // Hide/show extra 1\r\n        if (settings.extra_input_1 && settings.extra_input_1.trim() !== '') {\r\n            that.$('#extra_input_1_label').text(settings.extra_input_1.replace(/\\&apos;/g, '\\''));\r\n            that.$('#extra_input_1').rules('add', {\r\n                \"required\": true,\r\n                \"messages\": {\r\n                    \"required\": \"You must complete this field\"\r\n                }\r\n            });\r\n        } else {\r\n            that.$('.extra_input_1_wrapper').css('display', 'none');\r\n        }\r\n\r\n        // Hide/show extra 2\r\n        if (settings.extra_input_2 && settings.extra_input_2.trim() !== '') {\r\n            that.$('#extra_input_2_label').text(settings.extra_input_2.replace(/\\&apos;/g, '\\''));\r\n            that.$('#extra_input_2').rules('add', {\r\n                \"required\": true,\r\n                \"messages\": {\r\n                    \"required\": \"You must complete this field\"\r\n                }\r\n            });\r\n        } else {\r\n            that.$('.extra_input_2_wrapper').css('display', 'none');\r\n        }\r\n\r\n        // Hide/show extra 3\r\n        if (settings.extra_input_3 && settings.extra_input_3.trim() !== '') {\r\n            that.$('#extra_input_3_label').text(settings.extra_input_3.replace(/\\&apos;/g, '\\''));\r\n            that.$('#extra_input_3').rules('add', {\r\n                \"required\": true,\r\n                \"messages\": {\r\n                    \"required\": \"You must complete this field\"\r\n                }\r\n            });\r\n        } else {\r\n            that.$('.extra_input_3_wrapper').css('display', 'none');\r\n        }\r\n    },\r\n\r\n    // Used to validate if selected store is valid\r\n    validateSubmiHandler: function(form){\r\n        var that = this;\r\n        if (that.$('#pickup-container').is(\":visible\")\r\n            && that.$('.pickup-button').hasClass('selected')\r\n            && that.$('.activeStore').attr('id') === undefined\r\n            && stores !== undefined\r\n            && stores.length> 1\r\n        ) {\r\n            that.$('.searchTerm').css('display', 'block')\r\n            that.$('#pickup-store-search').val('')\r\n            that.$('#pickup-store-search-error').text('Please select which store you will pick up from')\r\n            that.$('#pickup-store-search-error').css('display', 'block')\r\n\r\n        } else {\r\n            form.submit();\r\n        }\r\n    },\r\n\r\n    pickupBoxChange: function() {\r\n        console.log('pickup box change')\r\n        var that = this;\r\n        var form = this.submitForm();\r\n        var settings = this.settings();\r\n        // Needed for top drawers\r\n        that.$('#ajaxifyDrawer').css('overflow', 'auto');\r\n        that.$('.drawer--has-fixed-footer .drawer__inner').css('overflow', 'auto');\r\n        //ajaxCart.load();// SHOPIFY function\r\n        // This will resize the footer but it's not very advantageous for us\r\n        //theme.sizeCartDrawerFooter();\r\n        //ShopifyAPI.changeItem(1, 60)\r\n\r\n        that.$(form).validate({\r\n            submitHandler: that.validateSubmiHandler.bind(that)\r\n        });\r\n        console.log(that.$('.js-toggle-pickup').hasClass('selected'))\r\n\r\n        // If user has selected to pickup or cart contains pickup product\r\n        if(that.$('.js-toggle-pickup').hasClass('selected')) {\r\n            that.$('#pickup-attribute').val('1')\r\n            this.updateFormActionWithShippingInformation();\r\n            that.$('#pickup-details').show();\r\n            this.addCartItems(); // Add pickup product to the cart\r\n\r\n            // Hide/show date\r\n            if (settings.date_enabled) {\r\n                // If enabled, add validation rules\r\n                that.$(\"#pickup-date-start\").rules('add', {\r\n                    \"required\": true,\r\n                    \"messages\": {\r\n                        \"required\": \"Please enter a pickup date.\"\r\n                    }\r\n                });\r\n            } else {\r\n                // If not enabled, hide\r\n                that.$('#pickup-date-start').css('display', 'none');\r\n                that.$('#pickup-date-label').css('display', 'none');\r\n                that.$('.pickup-date-label-span').css('display', 'none');\r\n            };\r\n\r\n            // Hide/show phone\r\n            if (settings.phone) {\r\n                that.$(\"#pickup-number\").rules('add', {\r\n                    \"required\": true,\r\n                    \"messages\": {\r\n                        \"required\": \"Please enter a phone number.\"\r\n                    }\r\n                });\r\n            } else {\r\n                // $j(\"#pickup-number\").rules('remove');\r\n                that.$('#pickup-number').css('display', 'none');\r\n                that.$('#pickup-number-label').css('display', 'none');\r\n            }\r\n\r\n            // Hide/show name\r\n            if (settings.name) {\r\n                that.$('#pickup-name').rules('add', {\r\n                    required: true,\r\n                    messages: {\r\n                        required: \"Please enter who will be picking up your order.\"\r\n                    }\r\n                });\r\n            } else {\r\n                that.$('#pickup-name').css('display', 'none');\r\n                that.$('#pickup-name-label').css('display', 'none');\r\n            };\r\n\r\n            // Hide/show store search\r\n            if (stores !== undefined && stores !== '' && stores.length > 1) {\r\n                // var rules = ($j('#pickup-store').rules());\r\n                // console.log(rules);\r\n                that.$('#pickup-store-search').rules('add', {\r\n                    \"required\": true,\r\n                    \"messages\": {\r\n                        \"required\": \"Please select which store you will pick up from\"\r\n                    }\r\n                });\r\n            } else {\r\n                that.$('#store-search').css('display', 'none'); // Hide store search\r\n            }\r\n            this.displayExtraFields();\r\n            that.$('#pickup-details').css('display', 'inline !important'); // Show extra info\r\n        } else {\r\n            that.$('#pickup-attribute').val('0')\r\n            that.$(\"#pickup-date-start\").rules('remove');\r\n            that.$(\"#pickup-number\").rules('remove');\r\n            that.$('#pickup-name').rules('remove');\r\n            that.$('#pickup-store-search').rules('remove');\r\n\r\n            // Pickup not checked. Hide display.\r\n            that.$('#pickup-details').css('display', 'none'); // Hide extra info\r\n            this.removePickupProduct()\r\n        }\r\n    },\r\n\r\n    updateStorePickupInformation: function (){\r\n        var that = this;\r\n        var settings = this.settings();\r\n        var storePickupInformation = '';\r\n        var pickupDate = that.$('#pickup-date-start').val();\r\n        if (pickupDate != undefined && pickupDate != '') {\r\n            storePickupInformation += ' Pickup Date: ' + pickupDate;\r\n        }\r\n\r\n        var pickupName = that.$('#pickup-name').val();\r\n        if (pickupName != undefined && pickupName != ''){\r\n            storePickupInformation += ' Name of person collecting: ' + pickupName;\r\n        }\r\n\r\n        var pickupNumber = that.$('#pickup-number').val()\r\n        if (pickupNumber != undefined && pickupNumber != '') {\r\n            storePickupInformation += ' Contact Number: ' + pickupNumber;\r\n        }\r\n\r\n        var extraInput1 = that.$('#extra_input_1').val();\r\n        if (extraInput1 != undefined && extraInput1 != '') {\r\n            storePickupInformation += ' ' + settings.extra_input_1 + ': ' + extraInput1;\r\n        }\r\n\r\n        var extraInput1 = that.$('#extra_input_2').val();\r\n        if (extraInput1 != undefined && extraInput1 != '') {\r\n            storePickupInformation += ' ' + settings.extra_input_2 + ': ' + extraInput1;\r\n        }\r\n\r\n        var extraInput1 = that.$('#extra_input_3').val();\r\n        if (extraInput1 != undefined && extraInput1 != '') {\r\n            storePickupInformation += ' ' + settings.extra_input_3 + ': ' + extraInput1;\r\n        }\r\n\r\n        if (that.$('li.activeStore').html() != undefined) {\r\n            var selectedStore = that.$('li.activeStore > a').html();\r\n            storePickupInformation += ' Selected store: ' + selectedStore\r\n            that.$('#pickup-selected-store').val(selectedStore)\r\n        }\r\n\r\n        that.$('#pickup-information').val(storePickupInformation)\r\n\r\n    },\r\n\r\n    submitForm: function(){\r\n        let foundForm = false;\r\n        var that = this;\r\n        let myForm = that.$('#pickup-details').closest('form')\r\n\r\n        if (!myForm.length){\r\n            for (var n in that.$('form')) {\r\n                var testForm = that.$('form')[n]; // Create $jq to test the form attributes\r\n                if(testForm.attributes && testForm.attributes.class && testForm.attributes.class.value == 'mini-cart') continue;\r\n                if(testForm.attributes && testForm.attributes.class && testForm.attributes.class.value.indexOf('ajaxcart') > -1) continue;\r\n                if (testForm.attributes && testForm.attributes.action && testForm.attributes.action.value.indexOf('/cart') > -1\r\n                    && testForm.attributes.class\r\n                    && testForm.attributes.class.value.indexOf('cart') > -1\r\n                    && testForm.attributes.action.value.indexOf('/add') < 0\r\n                ) { // We have a winner\r\n                    return that.$(testForm)[0];\r\n                };\r\n            };\r\n        } else {\r\n            return myForm;\r\n        }\r\n\r\n        if (!foundForm) {\r\n            for (var n in that.$('form')) {\r\n                var testForm = that.$('form')[n]; // Create $jq to test the form attributes\r\n                if(testForm.attributes && testForm.attributes.class && testForm.attributes.class.value == 'mini-cart') continue;\r\n                if(testForm.attributes && testForm.attributes.class && testForm.attributes.class.value.indexOf('mm-menu') > -1) continue;\r\n                if (testForm.attributes && testForm.attributes.action && testForm.attributes.action.value.indexOf('/cart') > -1\r\n                    && testForm.attributes.action.value.indexOf('/add') < 0\r\n                ) { // We have a winner\r\n                    return that.$(testForm)[0];\r\n                };\r\n            };\r\n        }\r\n        if (!foundForm) {\r\n            for (var n in that.$('form')) {\r\n                var testForm = that.$('form')[n]; // Create $jq to test the form attributes\r\n                if(testForm.attributes && testForm.attributes.class && testForm.attributes.class.value == 'mini-cart') continue;\r\n                if (testForm.attributes && testForm.attributes.action && testForm.attributes.action.value.indexOf('/checkout') > -1\r\n                    && testForm.attributes.action.value.indexOf('/add') < 0\r\n                ) { // We have a winner\r\n                    return that.$(testForm)[0];\r\n                };\r\n            };\r\n        }\r\n\r\n        return '';\r\n    },\r\n\r\n    settings: function(){\r\n        return storePickupSettings;\r\n    },\r\n\r\n    injectButton: function(callback){\r\n        var that = this;\r\n        var checkExist = setInterval(function() {\r\n            //console.log('checking')\r\n            if (that.$('#pickup-container').length) {\r\n                that.$('#pickup-container').css('display', 'flex');\r\n                console.log(\"Exists!\");\r\n                clearInterval(checkExist);\r\n                callback();\r\n            }\r\n        }, 100);\r\n    },\r\n\r\n    storesTemplate: function(){\r\n        return '<div id=\"store-search\">' +\r\n            '              <label for=\"pickup-store-search\">Pickup Store</label>' +\r\n            '              <input type=\"text\" name=\"pickup-store-search\" id=\"pickup-store-search\" onkeyup=\"storePickup.storeFilter()\" placeholder=\"Choose a location below for pick up\">' +\r\n            '              <input type=\"hidden\" name=\"pickup-store\" id=\"pickup-store\">' +\r\n            '              \x3c!-- Where store value gets saved for validation --\x3e' +\r\n            '              <ul id=\"storeUL\"></ul>' +\r\n            '          </div>';\r\n    }\r\n};\r\n\r\n(function(){\r\n    if (typeof storePickupLoaded !== \"undefined\"){\r\n        if (storePickupLoaded === true) return;\r\n    }\r\n\r\n    var loadScript = function(url, callback){\r\n\r\n        var script = document.createElement(\"script\");\r\n        script.type = \"text/javascript\";\r\n\r\n        // If the browser is Internet Explorer.\r\n        if (script.readyState){\r\n            script.onreadystatechange = function(){\r\n                if (script.readyState == \"loaded\" || script.readyState == \"complete\"){\r\n                    script.onreadystatechange = null;\r\n                    callback();\r\n                }\r\n            };\r\n            // For any other browser.\r\n        } else {\r\n            script.onload = function(){\r\n                callback();\r\n            };\r\n        }\r\n\r\n        script.src = url;\r\n        document.getElementsByTagName(\"head\")[0].appendChild(script);\r\n    };\r\n\r\n    // Load inline css\r\n    (function(css){\r\n        var head = document.getElementsByTagName('head')[0];\r\n        var s = document.createElement('style');\r\n        s.setAttribute('type', 'text/css');\r\n        s.appendChild(document.createTextNode(css));\r\n        head.appendChild(s);\r\n    })(css);\r\n\r\n    //load link css\r\n    (function(linkCss){\r\n        var link = document.createElement('link');\r\n        link.setAttribute('rel', 'stylesheet');\r\n        link.setAttribute('type', 'text/css');\r\n        link.setAttribute('href', linkCss );\r\n        document.getElementsByTagName('head')[0].appendChild(link)\r\n    })(appUrl + 'styles/classic.css');\r\n\r\n\r\n    var myAppJavaScript = function($){\r\n        // Start of callback hell :) fix it\r\n        loadScript('https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js', function(){\r\n            if (jQuery !== undefined && jQuery.fn.validate !== undefined && jQuery.fn.rules !== undefined){\r\n                $.fn.validate = jQuery.fn.validate;\r\n                $.fn.rules = jQuery.fn.rules;\r\n            }\r\n\r\n            //loadScript(appUrl + 'js/picker.js', function(){\r\n            loadScript('https://cdn.jsdelivr.net/combine/npm/pickadate@3.5.6/lib/compressed/picker.min.js,npm/pickadate@3.5.6/lib/compressed/picker.date.min.js,npm/pickadate@3.5.6/lib/compressed/picker.time.min.js', function(){\r\n                //loadScript(appUrl + 'js/picker.date.js', function(){\r\n                //loadScript(appUrl + 'js/picker.time.js', function(){\r\n                if (jQuery !== undefined && jQuery.fn.pickadate !== undefined) {\r\n                    $.fn.pickadate = jQuery.fn.pickadate;\r\n                }\r\n                console.log('script added');\r\n                $(document).ready(function() {\r\n                    //console.log($.fn.validate)\r\n                    // Initialize Store Pickup Option\r\n                    storePickup.init($);\r\n                });\r\n                //});\r\n                //});\r\n            });\r\n        });\r\n    };\r\n\r\n    // Check jquery version\r\n    if ((typeof jQuery === 'undefined') || (parseFloat(jQuery.fn.jquery) < 1.7)) {\r\n        console.log('Load jquery.');\r\n        loadScript('//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', function(){\r\n            var jQuery191 = jQuery.noConflict();\r\n            myAppJavaScript(jQuery191);\r\n        });\r\n    } else {\r\n        console.log('jQuery loaded.')\r\n        myAppJavaScript(jQuery);\r\n    }\r\n})();\n\n//# sourceURL=webpack:///./src/includes/storepickup.js?")},"./src/index.js":function(module,exports,__webpack_require__){eval("// don't insert axios directly, it was creating issues for this store: articledublin.com\r\n//require('./includes/axios.min.js');\r\ndocument.querySelector('.pickup-button > span').innerHTML = '<div class=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>';\r\naxios.get(appUrl + 'isInstalled', {\r\n    params: {\r\n        shop: \"{{ shop.permanent_domain }}\"\r\n    }\r\n}).then(function(response) {\r\n    if (response.data.status == '404'){\r\n        var elem = document.querySelector('#pickup-container');\r\n        elem.parentNode.removeChild(elem);\r\n    } else {\r\n        console.log('cart')\r\n        __webpack_require__(/*! ./includes/init.js */ \"./src/includes/init.js\");\r\n        __webpack_require__(/*! ./includes/storepickup.js */ \"./src/includes/storepickup.js\");\r\n    }\r\n}).catch(function (error) {\r\n    console.log(error);\r\n})\r\n\n\n//# sourceURL=webpack:///./src/index.js?")}})</script>